<!DOCTYPE html>
<html lang="fa" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computer User and Typing Test - Khwarizmi Educational Institute</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* متغیرهای رنگ و استایل */
        :root {
            --primary-color: #1a5f7a;
            --secondary-color: #159895;
            --accent-color: #ffc107;
            --nav-prev-color: #2196F3; /* رنگ آبی برای قبلی */
            --nav-next-color: #9C27B0; /* رنگ بنفش برای بعدی */
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --info-color: #3498db;
            --answered-color: #6c757d;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), #159895, #57c4b0);
            --gradient-success: linear-gradient(135deg, var(--success-color), #27ae60);
            --gradient-danger: linear-gradient(135deg, var(--danger-color), #c0392b);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #ff9800);
            --gradient-answered: linear-gradient(135deg, #6c757d, #495057);
            --gradient-nav-prev: linear-gradient(135deg, var(--nav-prev-color), #1976D2); /* گرادیان قبلی */
            --gradient-nav-next: linear-gradient(135deg, var(--nav-next-color), #7B1FA2); /* گرادیان بعدی */
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        /* انیمیشن‌های سفارشی */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes confettiRain {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        /* استایل عمومی */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            animation: fadeIn 0.8s ease-out;
            position: relative;
            overflow-x: hidden;
            text-align: left;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(26, 95, 122, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(21, 152, 149, 0.05) 0%, transparent 20%);
            z-index: -1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            animation: fadeIn 0.8s ease-out 0.2s both;
        }
        
        /* استایل هدر */
        header {
            background: var(--gradient-primary);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
            border-radius: 0 0 25px 25px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite linear;
        }
        
        header h1 {
            font-size: 32px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: float 3s ease-in-out infinite;
        }
        
        /* استایل دکمه‌ها */
        button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 8px;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--box-shadow-hover);
        }
        
        button:active {
            transform: translateY(-2px) scale(0.98);
        }
        
        button.selected {
            background: var(--gradient-accent);
            color: var(--dark-color);
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.4);
        }
        
        button.correct {
            background: var(--gradient-success);
            box-shadow: 0 5px 20px rgba(46, 204, 113, 0.4);
        }
        
        button.incorrect {
            background: var(--gradient-danger);
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
        }
        
        button.answered {
            background: var(--gradient-answered);
            box-shadow: 0 5px 20px rgba(108, 117, 125, 0.4);
        }
        
        /* استایل دکمه‌های ناوبری مخصوص */
        button.nav-btn {
            padding: 12px 28px;
            font-size: 17px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 160px;
        }
        
        button.nav-prev-btn {
            background: var(--gradient-nav-prev) !important;
            box-shadow: 0 5px 20px rgba(33, 150, 243, 0.4);
        }
        
        button.nav-prev-btn:hover {
            background: linear-gradient(135deg, #1976D2, #0D47A1) !important;
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.6);
        }
        
        button.nav-next-btn {
            background: var(--gradient-nav-next) !important;
            box-shadow: 0 5px 20px rgba(156, 39, 176, 0.4);
        }
        
        button.nav-next-btn:hover {
            background: linear-gradient(135deg, #7B1FA2, #4A148C) !important;
            box-shadow: 0 8px 25px rgba(156, 39, 176, 0.6);
        }
        
        button.submit-btn {
            background: var(--gradient-success);
            padding: 16px 32px;
            font-size: 18px;
            min-width: 180px;
        }
        
        button.submit-btn:hover {
            background: linear-gradient(135deg, #27ae60, #219653);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.6);
        }
        
        /* استایل منوی اصلی */
        .main-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            padding: 20px;
            animation: fadeIn 0.8s ease-out;
        }
        
        .exam-info {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
            width: 100%;
            max-width: 800px;
            text-align: center;
            animation: slideInRight 0.6s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .exam-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .exam-info h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent-color);
            font-size: 26px;
        }
        
        .exam-stats {
            display: flex;
            justify-content: space-around;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            min-width: 150px;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--primary-color);
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-label {
            font-size: 16px;
            color: #666;
            font-weight: 600;
        }
        
        /* استایل بخش سوالات */
        .quiz-container {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
            animation: slideInRight 0.6s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .lesson-title {
            font-size: 32px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary-color);
            padding-bottom: 20px;
            border-bottom: 3px solid var(--accent-color);
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .timer {
            font-size: 24px;
            text-align: center;
            margin-bottom: 25px;
            background: var(--gradient-primary);
            padding: 18px;
            border-radius: 15px;
            font-weight: 700;
            color: white;
            box-shadow: 0 5px 15px rgba(26, 95, 122, 0.2);
            position: relative;
            overflow: hidden;
            animation: pulse 2s infinite;
        }
        
        .timer.warning {
            background: var(--gradient-accent);
            animation: pulse 1s infinite;
        }
        
        .timer.danger {
            background: var(--gradient-danger);
            animation: pulse 0.5s infinite;
        }
        
        .question {
            font-size: 26px;
            font-weight: 700;
            margin: 30px 0;
            text-align: left;
            line-height: 1.8;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border-left: 6px solid var(--primary-color);
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
            position: relative;
            animation: slideInLeft 0.6s ease-out;
        }
        
        .question::after {
            content: '?';
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: var(--primary-color);
            opacity: 0.2;
            font-weight: 900;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option-btn {
            width: 100%;
            height: 75px;
            text-align: left;
            font-size: 20px;
            padding: 0 80px 0 30px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            border-radius: 12px;
            margin: 12px 0;
            position: relative;
            overflow: hidden;
        }
        
        .option-btn::before {
            content: attr(data-option);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .option-btn:hover {
            transform: translateX(10px) translateY(-3px);
            box-shadow: var(--box-shadow-hover);
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .question-numbers {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
        }
        
        .number-btn {
            width: 55px;
            height: 55px;
            font-size: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .number-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .number-btn:hover::after {
            opacity: 1;
        }
        
        /* نوار پیشرفت */
        .progress-container {
            width: 100%;
            height: 15px;
            background: #e9ecef;
            border-radius: 8px;
            margin: 30px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 8px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        /* استایل صفحه نتایج */
        .results-container {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
            animation: slideInRight 0.6s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .results-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .summary {
            font-size: 32px;
            font-weight: 800;
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(26, 95, 122, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .summary::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1%, transparent 1%);
            background-size: 20px 20px;
            animation: float 20s linear infinite;
        }
        
        .pass-animation {
            background: linear-gradient(45deg, var(--success-color), #27ae60, var(--success-color)) !important;
            background-size: 400% 400% !important;
            animation: gradientShift 3s ease infinite !important;
        }
        
        .detailed-results {
            margin: 30px 0;
        }
        
        .category-result {
            margin-bottom: 20px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            border-left: 5px solid var(--primary-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        
        .category-result:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        /* استایل راهنما */
        .help-container {
            display: none;
            text-align: left;
            line-height: 2;
            font-size: 20px;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 40px;
            animation: slideInRight 0.6s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .help-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .help-container h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--accent-color);
            font-size: 28px;
        }
        
        /* استایل صفحه ورود رمز */
        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            padding: 20px;
            animation: fadeIn 0.8s ease-out;
        }
        
        .login-box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 450px;
            text-align: center;
            animation: slideInRight 0.6s ease-out;
            transform-style: preserve-3d;
            perspective: 1000px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .login-box h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 28px;
        }
        
        .login-box input {
            width: 100%;
            padding: 16px;
            margin: 15px 0;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 18px;
            transition: var(--transition);
        }
        
        .login-box input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.2);
            transform: translateY(-2px);
            outline: none;
        }
        
        .login-message {
            margin-top: 20px;
            font-weight: 600;
            min-height: 24px;
        }
        
        .loading {
            color: var(--primary-color);
            margin-top: 20px;
            font-size: 16px;
        }
        
        /* استایل انتخاب آزمون */
        .exam-type-selection {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .exam-type-btn {
            width: 250px;
            height: 100px;
            font-size: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            transition: var(--transition);
        }
        
        .exam-type-btn i {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .exam-type-btn:hover {
            transform: translateY(-10px) scale(1.05);
        }
        
        /* استایل فوتر */
        footer {
            text-align: center;
            padding: 25px 0;
            margin-top: 40px;
            font-size: 16px;
            color: #666;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-top: 2px solid var(--primary-color);
            border-radius: 25px 25px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }
        
        /* استایل‌های رسپانسیو */
        @media (max-width: 992px) {
            .exam-stats {
                justify-content: center;
            }
            
            .stat-item {
                min-width: 120px;
            }
            
            .question {
                font-size: 22px;
                padding: 25px;
            }
            
            .option-btn {
                height: 70px;
                font-size: 18px;
            }
            
            .lesson-title {
                font-size: 28px;
            }
            
            button.nav-btn {
                min-width: 140px;
                padding: 10px 20px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header h1 {
                font-size: 24px;
            }
            
            .exam-type-selection {
                flex-direction: column;
                align-items: center;
            }
            
            .exam-type-btn {
                width: 100%;
                max-width: 350px;
                height: 90px;
            }
            
            .question {
                font-size: 20px;
                padding: 20px;
            }
            
            .option-btn {
                height: 65px;
                font-size: 16px;
                padding: 0 70px 0 25px;
            }
            
            .option-btn::before {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .timer {
                font-size: 20px;
                padding: 15px;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .navigation button {
                width: 100%;
                max-width: 300px;
                margin: 8px 0;
            }
            
            .number-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .summary {
                font-size: 24px;
                padding: 20px;
            }
            
            .login-box {
                width: 90%;
                padding: 30px;
            }
            
            button.nav-btn {
                min-width: 100%;
                font-size: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .stat-item {
                min-width: 100px;
                padding: 15px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            .stat-label {
                font-size: 14px;
            }
            
            .question {
                font-size: 18px;
            }
            
            .option-btn {
                height: 60px;
                padding: 0 60px 0 20px;
            }
            
            .option-btn::before {
                width: 30px;
                height: 30px;
                right: 15px;
                font-size: 14px;
            }
            
            .lesson-title {
                font-size: 22px;
            }
            
            .summary {
                font-size: 20px;
            }
            
            button.nav-btn {
                font-size: 15px;
                padding: 10px 15px;
            }
        }
        
        /* استایل‌های ویژه برای المان‌های پویا */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 18px 28px;
            border-radius: 12px;
            box-shadow: var(--box-shadow-hover);
            z-index: 10000;
            animation: slideInRight 0.5s ease-out;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        
        .notification-content i {
            font-size: 22px;
        }
        
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }
        
        .loading-content {
            text-align: center;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
        }
        
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            pointer-events: none;
            z-index: 9999;
        }
        
        /* استایل‌های برای نمایش وضعیت پاسخ */
        .answer-status {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
        }
        
        .status-item {
            text-align: center;
            flex: 1;
        }
        
        .status-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .status-label {
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-laptop-code"></i> Computer User and Typing Test - Khwarizmi Educational Institute</h1>
    </header>
    
    <div class="container">
        <!-- Login Page -->
        <div id="login-container" class="login-container">
            <div class="login-box">
                <h2><i class="fas fa-lock"></i> Login to Test System</h2>
                <p style="margin-bottom: 20px; color: #666;">Please enter the password to access the test:</p>
                <input type="password" id="password-input" placeholder="Password" autocomplete="off">
                <button id="login-btn" onclick="checkPassword()"><i class="fas fa-sign-in-alt"></i> Login</button>
                <p id="login-message" class="login-message"></p>
                <p id="loading-message" class="loading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i> Loading password from file...
                </p>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="main-menu" class="main-menu" style="display: none;">
            <div class="exam-info">
                <h2><i class="fas fa-info-circle"></i> Select Test Type</h2>
                <p style="font-size: 18px; margin-bottom: 20px;">Please select the type of test you want to take:</p>
                
                <div class="exam-type-selection">
                    <button class="exam-type-btn" id="user-exam-btn" onclick="selectExamType('user')">
                        <i class="fas fa-desktop"></i>
                        Computer User Test
                    </button>
                    <button class="exam-type-btn" id="typing-exam-btn" onclick="selectExamType('typing')">
                        <i class="fas fa-keyboard"></i>
                        Computer Typing Test
                    </button>
                </div>
            </div>
            
            <div id="user-exam-info" class="exam-info" style="display: none;">
                <h2><i class="fas fa-info-circle"></i> Computer User Test Information</h2>
                <p style="font-size: 18px; margin-bottom: 20px;">This test includes 20 random questions out of 60 computer user questions.</p>
                
                <div class="exam-stats">
                    <div class="stat-item">
                        <div class="stat-value">20</div>
                        <div class="stat-label">Displayed Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">207</div>
                        <div class="stat-label">Available Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Minimum Correct to Pass</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">30</div>
                        <div class="stat-label">Minutes Time</div>
                    </div>
                </div>
                
                <p style="margin: 15px 0; font-weight: 600; color: var(--primary-color);">Test Topics: Windows, Internet, Email, Applications</p>
                <p style="color: var(--accent-color); font-weight: bold; margin: 20px 0; padding: 15px; background: rgba(255, 193, 7, 0.1); border-radius: 10px;">
                    <i class="fas fa-random"></i> Each time you run the test, 20 random questions are selected from 60 questions
                </p>
                
                <button id="start-user-exam-btn" onclick="startRandomExam('user')" style="font-size: 22px; padding: 18px 35px; margin-top: 20px;">
                    <i class="fas fa-play-circle"></i> Start User Test
                </button>
            </div>
            
            <div id="typing-exam-info" class="exam-info" style="display: none;">
                <h2><i class="fas fa-info-circle"></i> Computer Typing Test Information</h2>
                <p style="font-size: 18px; margin-bottom: 20px;">This test includes 20 random questions out of 60 computer typing questions.</p>
                
                <div class="exam-stats">
                    <div class="stat-item">
                        <div class="stat-value">20</div>
                        <div class="stat-label">Displayed Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">212</div>
                        <div class="stat-label">Available Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Minimum Correct to Pass</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">30</div>
                        <div class="stat-label">Minutes Time</div>
                    </div>
                </div>
                
                <p style="margin: 15px 0; font-weight: 600; color: var(--primary-color);">Test Topics: Word Software, Typing, Formatting, Tables</p>
                <p style="color: var(--accent-color); font-weight: bold; margin: 20px 0; padding: 15px; background: rgba(255, 193, 7, 0.1); border-radius: 10px;">
                    <i class="fas fa-random"></i> Each time you run the test, 20 random questions are selected from 60 questions
                </p>
                
                <button id="start-typing-exam-btn" onclick="startRandomExam('typing')" style="font-size: 22px; padding: 18px 35px; margin-top: 20px;">
                    <i class="fas fa-play-circle"></i> Start Typing Test
                </button>
            </div>
            
            <div style="margin-top: 30px; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">
                <button id="back-to-selection-btn" onclick="backToExamSelection()" style="display: none;">
                    <i class="fas fa-arrow-left"></i> Back to Selection
                </button>
                <button id="help-btn" onclick="showHelp()"><i class="fas fa-question-circle"></i> Test Guide</button>
                <button id="logout-btn" onclick="logout()" style="background: var(--gradient-danger);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Test Page -->
        <div id="quiz-container" class="quiz-container">
            <div class="lesson-title" id="lesson-title">Test</div>
            <div class="timer" id="timer">⏱️ Time: 30:00</div>
            
            <!-- Answer Status Bar -->
            <div class="answer-status" id="answer-status" style="display: none;">
                <div class="status-item">
                    <div class="status-value" id="correct-count">0</div>
                    <div class="status-label">Correct Questions</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="incorrect-count">0</div>
                    <div class="status-label">Wrong Questions</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="unanswered-count">20</div>
                    <div class="status-label">Unanswered Questions</div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="question" id="question"></div>
            <div class="options" id="options">
                <button class="option-btn" id="option-0" onclick="selectOption(0)" data-option="A"></button>
                <button class="option-btn" id="option-1" onclick="selectOption(1)" data-option="B"></button>
                <button class="option-btn" id="option-2" onclick="selectOption(2)" data-option="C"></button>
                <button class="option-btn" id="option-3" onclick="selectOption(3)" data-option="D"></button>
            </div>
            <div class="navigation">
                <button class="nav-btn nav-prev-btn" id="prev-btn" onclick="prevQuestion()"><i class="fas fa-arrow-left"></i> Previous Question</button>
                <button class="nav-btn nav-next-btn" id="next-btn" onclick="nextQuestion()">Next Question <i class="fas fa-arrow-right"></i></button>
                <button class="submit-btn" id="submit-btn" onclick="submitQuiz()"><i class="fas fa-check-circle"></i> Finish Test</button>
            </div>
            <div class="question-numbers" id="question-numbers"></div>
        </div>

        <!-- Results Page -->
        <div id="results-container" class="results-container">
            <div class="summary" id="summary"></div>
            
            <div class="detailed-results" id="detailed-results">
                <!-- Detailed results for each section will be displayed here -->
            </div>
            
            <div class="question" id="result-question"></div>
            <div class="options" id="result-options">
                <button class="option-btn" id="result-option-0" disabled data-option="A"></button>
                <button class="option-btn" id="result-option-1" disabled data-option="B"></button>
                <button class="option-btn" id="result-option-2" disabled data-option="C"></button>
                <button class="option-btn" id="result-option-3" disabled data-option="D"></button>
            </div>
            <div class="navigation">
                <button class="nav-btn nav-prev-btn" id="prev-result-btn" onclick="prevResultQuestion()"><i class="fas fa-arrow-left"></i> Previous Question</button>
                <button class="nav-btn nav-next-btn" id="next-result-btn" onclick="nextResultQuestion()">Next Question <i class="fas fa-arrow-right"></i></button>
                <button class="nav-btn" id="back-to-menu-btn" onclick="backToMainMenu()"><i class="fas fa-home"></i> Back to Menu</button>
                <button class="nav-btn" id="new-exam-btn" onclick="startSameExamAgain()" style="background: var(--gradient-primary);">
                    <i class="fas fa-redo"></i> New Test
                </button>
            </div>
            <div class="question-numbers" id="result-numbers"></div>
        </div>

        <!-- Help Page -->
        <div id="help-container" class="help-container">
            <h2><i class="fas fa-info-circle"></i> Test System User Guide</h2>
            <p style="margin-bottom: 20px;">
                <i class="fas fa-check" style="color: var(--success-color);"></i> This system includes two types of tests: Computer User and Computer Typing.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Each test has 60 questions in the question bank.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Each time you take the test, 20 random questions are selected from 60 questions.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> The time for each test is 30 minutes.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> <strong>Passing condition: Minimum 6 correct answers out of 20 questions</strong><br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Question numbers at the bottom of the page allow you to go to any question.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> You can navigate between questions using arrow keys.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> After answering all questions, click Finish Test.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> In the results page you can see your correct and incorrect answers.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Computer User Test includes topics: Windows, Internet, Email, Applications.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Computer Typing Test includes topics: Word Software, Typing, Formatting, Tables.<br>
                <i class="fas fa-check" style="color: var(--success-color);"></i> Each time you run the test, 20 random questions are selected from 60 questions.<br><br>
                <strong style="color: var(--primary-color);">Keyboard Shortcuts:</strong><br>
                <i class="fas fa-keyboard" style="color: var(--accent-color);"></i> Keys 1-4: Select options<br>
                <i class="fas fa-keyboard" style="color: var(--accent-color);"></i> Arrow keys: Navigate between questions<br>
                <i class="fas fa-keyboard" style="color: var(--accent-color);"></i> Ctrl+Enter: Submit answer/Finish test<br>
                <i class="fas fa-keyboard" style="color: var(--accent-color);"></i> Escape: Return to menu<br><br>
                <span style="color: var(--success-color); font-weight: bold;">Good luck!</span>
            </p>
            <button onclick="backToMainMenu()"><i class="fas fa-arrow-left"></i> Back to Menu</button>
        </div>
    </div>
    
    <footer>
        <p>© 2025 Computer User and Typing Test - Khwarizmi Educational Institute. All rights reserved.</p>
        <p>SAY4s | Design and Development: Khwarizmi Technical Team</p>
    </footer>

    <script>
        // Complete computer user questions data (60 questions)
        const userQuestions = [
            {
                "question": "What are the cloud sites called that are used for searching information?",
                "options": ["Browser", "Search Engine", "Internet Explorer", "Email"],
                "answer": "Search Engine",
                "category": "Internet"
            },
            {
                "question": "In which field are hidden recipient addresses written?",
                "options": ["To", "Cc", "Bcc", "Subject"],
                "answer": "Bcc",
                "category": "Email"
            },
            {
                "question": "Which IE menu is used for settings?",
                "options": ["File", "Edit", "View", "Tools"],
                "answer": "Tools",
                "category": "Internet"
            },
            {
                "question": "What is the credit and subscription that an ISP provides to a customer called?",
                "options": ["Username", "Password", "Account", "Domain"],
                "answer": "Account",
                "category": "Internet"
            },
            {
                "question": "Which option in the Folder Options window causes hidden files and folders to be displayed?",
                "options": ["Show hidden files & Folders", "Hide protected operating system files", "Display file size information", "Hide extensions for known file types"],
                "answer": "Show hidden files & Folders",
                "category": "Windows"
            },
            {
                "question": "Which option in the Print dialog box prints the selected area?",
                "options": ["All", "Current Page", "Selection", "Pages"],
                "answer": "Selection",
                "category": "Windows"
            },
            {
                "question": "Which option causes the computer to shut down completely and clear all information in RAM?",
                "options": ["Sleep", "Hibernate", "Restart", "Shut Down"],
                "answer": "Shut Down",
                "category": "Windows"
            },
            {
                "question": "What is the first or most basic window of Windows?",
                "options": ["My Computer", "Desktop", "Taskbar", "Start Menu"],
                "answer": "Desktop",
                "category": "Windows"
            },
            {
                "question": "What operation is performed when dragging and dropping an icon to another window in the same drive?",
                "options": ["Copy/Paste", "Cut/Paste", "Move", "Delete"],
                "answer": "Cut/Paste",
                "category": "Windows"
            },
            {
                "question": "Which program can be used to create a backup of system information?",
                "options": ["System Restore", "Backup & Restore", "Disk Cleanup", "Defragment"],
                "answer": "Backup & Restore",
                "category": "Windows"
            },
            {
                "question": "Which device can be used to transfer images and text to a computer?",
                "options": ["Printer", "Scanner", "Monitor", "Keyboard"],
                "answer": "Scanner",
                "category": "Hardware"
            },
            {
                "question": "Which command can be used to rename a folder or file?",
                "options": ["Move", "Copy", "Ren", "Del"],
                "answer": "Ren",
                "category": "Windows"
            },
            {
                "question": "Which button can be used to change the shape of desktop icons?",
                "options": ["Change Desktop Background", "Change Icon", "Screen Resolution", "Personalize"],
                "answer": "Change Icon",
                "category": "Windows"
            },
            {
                "question": "Which key can be used to display the menu bar in windows?",
                "options": ["Ctrl", "Alt", "Shift", "F10"],
                "answer": "Alt",
                "category": "Windows"
            },
            {
                "question": "Which option in Paint can be used to invert the selected area?",
                "options": ["Rotate", "Flip", "Invert Selection", "Resize"],
                "answer": "Invert Selection",
                "category": "Applications"
            },
            {
                "question": "Which option can be used to set the screen orientation?",
                "options": ["Resolution", "Orientation", "Color", "Brightness"],
                "answer": "Orientation",
                "category": "Windows"
            },
            {
                "question": "Which option can be used to forward an email to a third party?",
                "options": ["Reply", "Reply All", "Forward", "Send"],
                "answer": "Forward",
                "category": "Email"
            },
            {
                "question": "Which option causes taskbar icons to be displayed in small size?",
                "options": ["Use small taskbar buttons", "Auto-hide the taskbar", "Lock the taskbar", "Show desktop icons"],
                "answer": "Use small taskbar buttons",
                "category": "Windows"
            },
            {
                "question": "Which option places the image at actual size in the center of the desktop?",
                "options": ["Stretch", "Tile", "Center", "Fit"],
                "answer": "Center",
                "category": "Windows"
            },
            {
                "question": "Which option in the right-click menu automatically arranges desktop icons?",
                "options": ["Auto arrange icons", "Align icons to grid", "Show desktop icons", "Refresh"],
                "answer": "Auto arrange icons",
                "category": "Windows"
            },
            {
                "question": "Which option switches between users with closing running programs?",
                "options": ["Switch User", "Log off", "Lock", "Sleep"],
                "answer": "Log off",
                "category": "Windows"
            },
            {
                "question": "Which option switches between users without closing running programs?",
                "options": ["Switch User", "Log off", "Lock", "Sleep"],
                "answer": "Switch User",
                "category": "Windows"
            },
            {
                "question": "Which option can lock the taskbar?",
                "options": ["Auto-hide the taskbar", "Use small taskbar buttons", "Lock the taskbar", "Show taskbar on all displays"],
                "answer": "Lock the taskbar",
                "category": "Windows"
            },
            {
                "question": "Which option allows you to share the printer on the network you are connected to?",
                "options": ["Print Test Page", "Set as Default Printer", "Share this printer", "Printer Properties"],
                "answer": "Share this printer",
                "category": "Windows"
            },
            {
                "question": "Which option in the right-click menu on a printer sets it as default?",
                "options": ["Printing Preferences", "Set as Default Printer", "Pause Printing", "See What's Printing"],
                "answer": "Set as Default Printer",
                "category": "Windows"
            },
            {
                "question": "Which option in the New right-click menu creates a folder?",
                "options": ["Shortcut", "Text Document", "Folder", "Bitmap Image"],
                "answer": "Folder",
                "category": "Windows"
            },
            {
                "question": "Which command is used to run programs?",
                "options": ["Start", "Search", "Run", "Execute"],
                "answer": "Run",
                "category": "Windows"
            },
            {
                "question": "Which option is used to add a site name to favorites?",
                "options": ["Add to Favorites", "Subscribe", "Bookmark", "Save Page"],
                "answer": "Add to Favorites",
                "category": "Internet"
            },
            {
                "question": "Which memory unit is used to measure memory like CD?",
                "options": ["KB", "MB", "GB", "TB"],
                "answer": "MB",
                "category": "Computer Basics"
            },
            {
                "question": "Which unit can be used to measure memory like audio and video clips?",
                "options": ["KB", "MB", "GB", "TB"],
                "answer": "MB",
                "category": "Computer Basics"
            },
            {
                "question": "Which option can be used to create a signature?",
                "options": ["Theme", "Signature", "Stationery", "Font"],
                "answer": "Signature",
                "category": "Email"
            },
            {
                "question": "Which shortcut key can be used to create a new page in WordPad?",
                "options": ["Ctrl+O", "Ctrl+N", "Ctrl+S", "Ctrl+P"],
                "answer": "Ctrl+N",
                "category": "Applications"
            },
            {
                "question": "Which key should be used after entering the site name for .com domains?",
                "options": ["Ctrl+Enter", "Alt+Enter", "Shift+Enter", "F5"],
                "answer": "Ctrl+Enter",
                "category": "Internet"
            },
            {
                "question": "Which option is used to reply to a received email?",
                "options": ["Reply", "Forward", "Send", "New"],
                "answer": "Reply",
                "category": "Email"
            },
            {
                "question": "Which key is used to jump between options in windows and dialog boxes?",
                "options": ["Enter", "Tab", "Space", "Shift"],
                "answer": "Tab",
                "category": "Windows"
            },
            {
                "question": "Which button is used to attach a file to an email?",
                "options": ["Attach", "Insert", "Link", "Embed"],
                "answer": "Attach",
                "category": "Email"
            },
            {
                "question": "Which tool can be used to draw various shapes in Paint?",
                "options": ["Brush", "Pencil", "Shapes", "Eraser"],
                "answer": "Shapes",
                "category": "Applications"
            },
            {
                "question": "Which option in WINDOWS MEDIA should be active for random playback of songs?",
                "options": ["Repeat", "Shuffle", "Play", "Stop"],
                "answer": "Shuffle",
                "category": "Applications"
            },
            {
                "question": "Which option is used for random playback of songs?",
                "options": ["Repeat", "Shuffle", "Playlist", "Library"],
                "answer": "Shuffle",
                "category": "Applications"
            },
            {
                "question": "Which option is used to determine horizontal spacing of icons?",
                "options": ["Icon Spacing Horizontally", "Icon Spacing Vertically", "Auto Arrange", "Align to Grid"],
                "answer": "Icon Spacing Horizontally",
                "category": "Windows"
            },
            {
                "question": "Which option is used to change user picture?",
                "options": ["Change Password", "Change Picture", "Change Account Type", "Remove Account"],
                "answer": "Change Picture",
                "category": "Windows"
            },
            {
                "question": "Which option in User Accounts is used to change password?",
                "options": ["Change the password", "Remove the password", "Change the account type", "Change the account name"],
                "answer": "Change the password",
                "category": "Windows"
            },
            {
                "question": "Which option is used to change user type?",
                "options": ["Change the password", "Remove the password", "Change the account type", "Change the account name"],
                "answer": "Change the account type",
                "category": "Windows"
            },
            {
                "question": "Which option can be used to temporarily pause printing?",
                "options": ["Cancel", "Pause", "Resume", "Restart"],
                "answer": "Pause",
                "category": "Windows"
            },
            {
                "question": "Which key can be used to confirm information and go to next line?",
                "options": ["Enter", "Tab", "Space", "Shift"],
                "answer": "Enter",
                "category": "Windows"
            },
            {
                "question": "Which option is used to remove user password?",
                "options": ["Change the password", "Remove my Password", "Change the account type", "Change the account name"],
                "answer": "Remove my Password",
                "category": "Windows"
            },
            {
                "question": "Which key is used to delete an icon or characters in front of cursor?",
                "options": ["Backspace", "Delete", "Insert", "Home"],
                "answer": "Delete",
                "category": "Windows"
            },
            {
                "question": "Which option can be used to remove items from Start menu?",
                "options": ["Pin to Start Menu", "Remove from this list", "Add to Quick Launch", "Properties"],
                "answer": "Remove from this list",
                "category": "Windows"
            },
            {
                "question": "Which option is used to delete a program from print queue?",
                "options": ["Pause", "Resume", "Cancel", "Restart"],
                "answer": "Cancel",
                "category": "Windows"
            },
            {
                "question": "Which option is used to exit DOS environment?",
                "options": ["Quit", "Exit", "Close", "End"],
                "answer": "Exit",
                "category": "Windows"
            },
            {
                "question": "Which icon can be used for quick access to a program?",
                "options": ["Folder", "Shortcut", "File", "Program"],
                "answer": "Shortcut",
                "category": "Windows"
            },
            {
                "question": "Which option from context menu is used to save an internet picture?",
                "options": ["Save Picture As", "Copy", "Set as Background", "Print Picture"],
                "answer": "Save Picture As",
                "category": "Internet"
            },
            {
                "question": "Which key must be active for calculator keys to work?",
                "options": ["Caps Lock", "Num Lock", "Scroll Lock", "Insert"],
                "answer": "Num Lock",
                "category": "Windows"
            },
            {
                "question": "Which option minimizes window and places it on taskbar?",
                "options": ["Maximize", "Minimize", "Restore", "Close"],
                "answer": "Minimize",
                "category": "Windows"
            },
            {
                "question": "Which type of user account can be used to install programs?",
                "options": ["Standard", "Guest", "Administrator", "User"],
                "answer": "Administrator",
                "category": "Windows"
            },
            {
                "question": "Which command is used to display directory contents as tree structure?",
                "options": ["Dir", "Cd", "Tree", "List"],
                "answer": "Tree",
                "category": "Windows"
            },
            {
                "question": "What is a program that runs on system and damages computer called?",
                "options": ["Application Software", "Utility Program", "Malicious Program", "Operating System"],
                "answer": "Malicious Program",
                "category": "Security"
            },
            {
                "question": "What is Windows task manager called?",
                "options": ["File Manager", "Task Manager", "System Manager", "Process Manager"],
                "answer": "Task Manager",
                "category": "Windows"
            },
            {
                "question": "What is the largest key on keyboard that creates a space when pressed?",
                "options": ["Enter", "Space", "Tab", "Shift"],
                "answer": "Space",
                "category": "Hardware"
            },
            {
                "question": "What is the largest key on keyboard that creates a space?",
                "options": ["Enter", "Space", "Tab", "Shift"],
                "answer": "Space",
                "category": "Hardware"
            },
            {
                "question": "What is uploading a file to the internet called?",
                "options": ["Download", "Upload", "Copy", "Paste"],
                "answer": "Upload",
                "category": "Internet"
            },
            {
                "question": "What is receiving a file from the internet called?",
                "options": ["Download", "Upload", "Copy", "Paste"],
                "answer": "Download",
                "category": "Internet"
            }
        ];

        // Complete computer typing questions data (60 questions)
        const typingQuestions = [
            {
                "question": "Which view mode is used for web page design in Word?",
                "options": ["Web Layout", "Print Layout", "Outline", "Draft"],
                "answer": "Web Layout",
                "category": "Word"
            },
            {
                "question": "Which button is used to apply Tab?",
                "options": ["Set", "Clear", "Default", "OK"],
                "answer": "Set",
                "category": "Word"
            },
            {
                "question": "Which option is used to open a previously saved file?",
                "options": ["Open", "New", "Save", "Save As"],
                "answer": "Open",
                "category": "Word"
            },
            {
                "question": "Which option is used to determine display and formatting of numbers?",
                "options": ["Number Format", "Bullet Format", "Paragraph", "Style"],
                "answer": "Number Format",
                "category": "Word"
            },
            {
                "question": "Which IE menu is used for settings?",
                "options": ["Tools", "File", "Edit", "View"],
                "answer": "Tools",
                "category": "Internet"
            },
            {
                "question": "Which section contains flowchart design shapes?",
                "options": ["Flowchart", "Basic Shapes", "Block Arrows", "Callouts"],
                "answer": "Flowchart",
                "category": "Word"
            },
            {
                "question": "Which section of Shape tool contains basic geometric shapes?",
                "options": ["Basic Shapes", "Flowchart", "Block Arrows", "Stars and Banners"],
                "answer": "Basic Shapes",
                "category": "Word"
            },
            {
                "question": "Which operator is used to print pages 2, 3 and 4 of a document?",
                "options": ["2,3,4", "2-4", "2;3;4", "2 3 4"],
                "answer": "2,3,4",
                "category": "Word"
            },
            {
                "question": "Which option should be considered for landscape paper orientation?",
                "options": ["Landscape", "Portrait", "Margins", "Size"],
                "answer": "Landscape",
                "category": "Word"
            },
            {
                "question": "Which key should be held when drawing a circle shape?",
                "options": ["Shift", "Ctrl", "Alt", "Tab"],
                "answer": "Shift",
                "category": "Word"
            },
            {
                "question": "If deleting a cell in a table, which option should be selected to delete the containing row?",
                "options": ["Delete entire row", "Delete entire column", "Delete cells", "Delete table"],
                "answer": "Delete entire row",
                "category": "Word"
            },
            {
                "question": "If a red wavy line appears under a Latin word, what does it mean?",
                "options": ["Spelling error", "Grammar error", "No meaning", "Repeated"],
                "answer": "Spelling error",
                "category": "Word"
            },
            {
                "question": "Which option in View menu displays gridlines on page?",
                "options": ["Gridlines", "Ruler", "Navigation Pane", "Thumbnails"],
                "answer": "Gridlines",
                "category": "Word"
            },
            {
                "question": "Which option merges table cells?",
                "options": ["Merge", "Split", "Combine", "Join"],
                "answer": "Merge",
                "category": "Word"
            },
            {
                "question": "Which option makes text bold?",
                "options": ["Bold", "Italic", "Underline", "Strikethrough"],
                "answer": "Bold",
                "category": "Word"
            },
            {
                "question": "Which option centers text both vertically and horizontally in a cell?",
                "options": ["Align Center", "Align Left", "Align Right", "Justify"],
                "answer": "Align Center",
                "category": "Word"
            },
            {
                "question": "Which option adds misspelled word to dictionary?",
                "options": ["Add to Dictionary", "Ignore All", "Ignore Once", "Change All"],
                "answer": "Add to Dictionary",
                "category": "Word"
            },
            {
                "question": "Which option ignores all errors of a word in document?",
                "options": ["Ignore All", "Add to Dictionary", "Change", "Change All"],
                "answer": "Ignore All",
                "category": "Word"
            },
            {
                "question": "What is the default Tab size in centimeters?",
                "options": ["1.27", "2.54", "1.0", "1.5"],
                "answer": "1.27",
                "category": "Word"
            },
            {
                "question": "What does the icon in bottom corner of table do?",
                "options": ["Options 1 and 2", "Delete table", "Select table", "None"],
                "answer": "Options 1 and 2",
                "category": "Word"
            },
            {
                "question": "Which tool can copy formatting from one text to another?",
                "options": ["Format Painter", "Copy", "Paste", "Style"],
                "answer": "Format Painter",
                "category": "Word"
            },
            {
                "question": "Which effect gives reflection to text?",
                "options": ["Reflection", "Shadow", "Glow", "3D Rotation"],
                "answer": "Reflection",
                "category": "Word"
            },
            {
                "question": "Which feature allows typing abbreviations and letting Word complete them?",
                "options": ["AutoCorrect", "AutoText", "AutoComplete", "Spell Check"],
                "answer": "AutoCorrect",
                "category": "Word"
            },
            {
                "question": "Which key deletes characters after cursor?",
                "options": ["Delete", "Backspace", "Insert", "Home"],
                "answer": "Delete",
                "category": "Word"
            },
            {
                "question": "Which keys move backward in table cells?",
                "options": ["Shift + Tab", "Ctrl + Tab", "Alt + Tab", "Tab"],
                "answer": "Shift + Tab",
                "category": "Word"
            },
            {
                "question": "Which option flips shapes horizontally?",
                "options": ["Flip Horizontal", "Flip Vertical", "Rotate", "Align"],
                "answer": "Flip Horizontal",
                "category": "Word"
            },
            {
                "question": "Which option selects the row where cursor is located?",
                "options": ["Select Row", "Select Column", "Select Table", "Select All"],
                "answer": "Select Row",
                "category": "Word"
            },
            {
                "question": "Which option creates a new page with specific design?",
                "options": ["Cover Page", "Blank Page", "Page Break", "Section Break"],
                "answer": "Cover Page",
                "category": "Word"
            },
            {
                "question": "Which option groups shapes?",
                "options": ["Group", "Combine", "Merge", "Attach"],
                "answer": "Group",
                "category": "Word"
            },
            {
                "question": "Which option creates shortcut key for a Symbol?",
                "options": ["Shortcut Key", "Hotkey", "Quick Access", "Keyboard Shortcut"],
                "answer": "Shortcut Key",
                "category": "Word"
            },
            {
                "question": "Which option replaces all occurrences of words in text at once?",
                "options": ["Replace All", "Replace", "Find All", "Change All"],
                "answer": "Replace All",
                "category": "Word"
            },
            {
                "question": "Which Wrap Text option places image behind text?",
                "options": ["Behind Text", "In Front of Text", "Square", "Tight"],
                "answer": "Behind Text",
                "category": "Word"
            },
            {
                "question": "Which Section Breaks option creates new section on odd pages?",
                "options": ["Odd Page", "Even Page", "Next Page", "Continuous"],
                "answer": "Odd Page",
                "category": "Word"
            },
            {
                "question": "Which option displays all Latin letters in lowercase?",
                "options": ["Lowercase", "Uppercase", "Sentence case", "Capitalize Each Word"],
                "answer": "Lowercase",
                "category": "Word"
            },
            {
                "question": "Which option prints only the current page?",
                "options": ["Print Current Page", "Print All", "Print Selection", "Print Range"],
                "answer": "Print Current Page",
                "category": "Word"
            },
            {
                "question": "Which option aligns text to center left in table cell?",
                "options": ["Align Center Left", "Align Center", "Align Left", "Align Top Left"],
                "answer": "Align Center Left",
                "category": "Word"
            },
            {
                "question": "Which option creates different header/footer for first page?",
                "options": ["Different First Page", "Different Odd & Even Pages", "Show Document Text", "Header from Top"],
                "answer": "Different First Page",
                "category": "Word"
            },
            {
                "question": "Which option displays paper in landscape orientation?",
                "options": ["Landscape", "Portrait", "Margins", "Size"],
                "answer": "Landscape",
                "category": "Word"
            },
            {
                "question": "Which option displays text as subscript?",
                "options": ["Subscript", "Superscript", "Strikethrough", "Double strikethrough"],
                "answer": "Subscript",
                "category": "Word"
            },
            {
                "question": "Which option places gradient color on page background?",
                "options": ["Gradient", "Texture", "Pattern", "Picture"],
                "answer": "Gradient",
                "category": "Word"
            },
            {
                "question": "Which option minimizes the Ribbon?",
                "options": ["Minimize Ribbon", "Auto-hide Ribbon", "Close Ribbon", "Hide Ribbon"],
                "answer": "Minimize Ribbon",
                "category": "Word"
            },
            {
                "question": "Which button moves cursor to end of line?",
                "options": ["End", "Home", "Page Down", "Page Up"],
                "answer": "End",
                "category": "Word"
            },
            {
                "question": "Which button moves to beginning of current line?",
                "options": ["Home", "End", "Page Up", "Page Down"],
                "answer": "Home",
                "category": "Word"
            },
            {
                "question": "Which key clears table contents?",
                "options": ["Delete", "Backspace", "Space", "Enter"],
                "answer": "Delete",
                "category": "Word"
            },
            {
                "question": "Which keys go to first page of file or document?",
                "options": ["Ctrl + Home", "Ctrl + End", "Home", "End"],
                "answer": "Ctrl + Home",
                "category": "Word"
            },
            {
                "question": "Which option creates newspaper-style columns?",
                "options": ["Column", "Table", "Text Box", "WordArt"],
                "answer": "Column",
                "category": "Word"
            },
            {
                "question": "Which option shows table properties and characteristics?",
                "options": ["Properties", "Table Properties", "Format Table", "Table Options"],
                "answer": "Properties",
                "category": "Word"
            },
            {
                "question": "Which option or tool adjusts line spacing?",
                "options": ["Line Spacing", "Paragraph Spacing", "Indentation", "Alignment"],
                "answer": "Line Spacing",
                "category": "Word"
            },
            {
                "question": "Which tool writes text as superscript?",
                "options": ["Superscript", "Subscript", "Strikethrough", "Underline"],
                "answer": "Superscript",
                "category": "Word"
            },
            {
                "question": "Which option aligns text to top right in table cell?",
                "options": ["Align Top Right", "Align Top Left", "Align Bottom Right", "Align Center Right"],
                "answer": "Align Top Right",
                "category": "Word"
            },
            {
                "question": "Which key with double-click in empty cell selects entire table?",
                "options": ["Alt", "Ctrl", "Shift", "Tab"],
                "answer": "Alt",
                "category": "Word"
            },
            {
                "question": "Which option removes background color?",
                "options": ["No Color", "Transparent", "White", "Automatic"],
                "answer": "No Color",
                "category": "Word"
            },
            {
                "question": "Which option corrects grammar and spelling?",
                "options": ["Spelling & Grammar", "Thesaurus", "Word Count", "Language"],
                "answer": "Spelling & Grammar",
                "category": "Word"
            },
            {
                "question": "Which option applies hanging indent to second and subsequent lines?",
                "options": ["Hanging Indent", "First Line Indent", "Left Indent", "Right Indent"],
                "answer": "Hanging Indent",
                "category": "Word"
            },
            {
                "question": "Which option creates links between files and internet addresses?",
                "options": ["Hyperlink", "Bookmark", "Cross-reference", "Caption"],
                "answer": "Hyperlink",
                "category": "Word"
            },
            {
                "question": "Which option should be used to create style?",
                "options": ["Style", "Format", "Template", "Theme"],
                "answer": "Style",
                "category": "Word"
            },
            {
                "question": "Which option should be used to create normal styles?",
                "options": ["Normal", "Heading 1", "Title", "Subtitle"],
                "answer": "Normal",
                "category": "Word"
            },
            {
                "question": "Which option creates common header/footer for all pages?",
                "options": ["Header & Footer", "Page Number", "Footer", "Header"],
                "answer": "Header & Footer",
                "category": "Word"
            },
            {
                "question": "Which option inserts page number at cursor position?",
                "options": ["Current Position", "Page Margins", "Top of Page", "Bottom of Page"],
                "answer": "Current Position",
                "category": "Word"
            },
            {
                "question": "What should be adjusted for binding or wire binding margin?",
                "options": ["Gutter", "Margins", "Orientation", "Size"],
                "answer": "Gutter",
                "category": "Word"
            },
            {
                "question": "Which key creates one character space in text?",
                "options": ["Space", "Tab", "Enter", "Shift"],
                "answer": "Space",
                "category": "Word"
            }
        ];

        // Global variables
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let timerInterval = null;
        let currentExamType = "";
        let correctPassword = "1452"; 
        let userAnswers = [];
        let totalQuestions = 20;

        // Password loading function
        async function loadPassword() {
            const loadingMessage = document.getElementById('loading-message');
            const loginMessage = document.getElementById('login-message');
            
            loadingMessage.style.display = 'block';
            
            try {
                // Simulate loading
                await new Promise(resolve => setTimeout(resolve, 800));
                
                loadingMessage.style.display = 'none';
                loginMessage.textContent = '✅ System ready';
                loginMessage.style.color = 'var(--success-color)';
                
            } catch (error) {
                loadingMessage.style.display = 'none';
                loginMessage.textContent = '⚠️ Using default password';
                loginMessage.style.color = 'var(--warning-color)';
            }
        }

        // Password check function
        function checkPassword() {
            const inputPassword = document.getElementById('password-input').value;
            const messageElement = document.getElementById('login-message');
            
            if (inputPassword === correctPassword) {
                messageElement.textContent = '✅ Login successful!';
                messageElement.style.color = 'var(--success-color)';
                
                setTimeout(() => {
                    document.getElementById('login-container').style.display = 'none';
                    document.getElementById('main-menu').style.display = 'flex';
                    messageElement.textContent = '';
                }, 500);
            } else {
                messageElement.textContent = '❌ Wrong password';
                messageElement.style.color = 'var(--danger-color)';
                
                // Shake animation
                const loginBox = document.querySelector('.login-box');
                loginBox.style.animation = 'shake 0.5s';
                setTimeout(() => loginBox.style.animation = '', 500);
            }
        }

        // Select exam type function
        function selectExamType(type) {
            currentExamType = type;
            
            // Hide all sections
            document.getElementById('user-exam-info').style.display = 'none';
            document.getElementById('typing-exam-info').style.display = 'none';
            
            // Show relevant section
            if (type === 'user') {
                document.getElementById('user-exam-info').style.display = 'block';
            } else if (type === 'typing') {
                document.getElementById('typing-exam-info').style.display = 'block';
            }
            
            // Show back button
            document.getElementById('back-to-selection-btn').style.display = 'inline-block';
        }

        // Back to exam selection function
        function backToExamSelection() {
            currentExamType = "";
            document.getElementById('user-exam-info').style.display = 'none';
            document.getElementById('typing-exam-info').style.display = 'none';
            document.getElementById('back-to-selection-btn').style.display = 'none';
        }

        // Logout function
        function logout() {
            // Stop timer if active
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Reset variables
            currentQuestions = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            
            // Show login page
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('help-container').style.display = 'none';
            document.getElementById('login-container').style.display = 'flex';
            document.getElementById('password-input').value = '';
            
            // Return to initial state
            backToExamSelection();
        }

        // Start test function
        function startRandomExam(type) {
            if (type) {
                currentExamType = type;
            }
            
            // Hide menu and show test page
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            
            // Set title
            const title = currentExamType === 'user' ? 
                "🎯 Computer User Test" : 
                "⌨️ Computer Typing Test";
            document.getElementById('lesson-title').textContent = title;
            
            // Select questions
            const allQuestions = currentExamType === 'user' ? userQuestions : typingQuestions;
            currentQuestions = getRandomQuestions(allQuestions, 20);
            
            // Initialize answers
            userAnswers = new Array(currentQuestions.length).fill(null);
            
            // Show answer status
            document.getElementById('answer-status').style.display = 'flex';
            updateAnswerStatus();
            
            // Start from first question
            currentQuestionIndex = 0;
            createQuestionNumberButtons();
            
            // Start timer
            startTimer();
            
            // Show first question
            showQuestion();
            
            // Update navigation buttons status
            updateNavButtons();
        }

        // Random question selection function - fixed version
        function getRandomQuestions(allQuestions, count) {
            // Create a copy of questions array
            const shuffled = [...allQuestions];
            
            // Shuffle array (Fisher-Yates)
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            
            // Select required number
            const selected = shuffled.slice(0, count);
            
            // Shuffle options for each question
            selected.forEach(question => {
                // Create a copy of options
                const options = [...question.options];
                const correctAnswer = question.answer;
                
                // Store original correct position
                const originalCorrectIndex = options.indexOf(correctAnswer);
                
                // Create array of indices for shuffling
                const indices = [0, 1, 2, 3];
                
                // Shuffle indices
                for (let i = indices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [indices[i], indices[j]] = [indices[j], indices[i]];
                }
                
                // Create new options array with new order
                const shuffledOptions = [
                    options[indices[0]],
                    options[indices[1]],
                    options[indices[2]],
                    options[indices[3]]
                ];
                
                // Store shuffled options
                question.shuffledOptions = shuffledOptions;
                
                // Find new correct position
                question.correctIndex = shuffledOptions.indexOf(correctAnswer);
                
                // Ensure correct option is found
                if (question.correctIndex === -1) {
                    console.error("Correct option not found! Question:", question.question);
                    // As fallback solution, use simple shuffle
                    question.shuffledOptions = [...options];
                    question.correctIndex = originalCorrectIndex;
                }
            });
            
            return selected;
        }

        // Start timer function
        function startTimer() {
            let timeLeft = 30 * 60; // 30 minutes in seconds
            
            // Stop previous timer if exists
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Initial update
            updateTimerDisplay(timeLeft);
            
            // Set new timer
            timerInterval = setInterval(() => {
                timeLeft--;
                
                // Update display
                updateTimerDisplay(timeLeft);
                
                // Change color at critical times
                const timerElement = document.getElementById('timer');
                if (timeLeft <= 300) { // 5 minutes
                    timerElement.className = 'timer warning';
                }
                if (timeLeft <= 60) { // 1 minute
                    timerElement.className = 'timer danger';
                }
                
                // Check time end
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    alert('⏰ Test time is over!');
                    submitQuiz();
                }
            }, 1000);
        }

        // Timer display function
        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = `⏱️ Time: ${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // Show question function - fixed version
        function showQuestion() {
            if (currentQuestions.length === 0 || currentQuestionIndex >= currentQuestions.length) {
                return;
            }
            
            const question = currentQuestions[currentQuestionIndex];
            
            // Show question text
            document.getElementById('question').textContent = question.question;
            
            // Show options
            const optionElements = document.querySelectorAll('#options .option-btn');
            
            // Ensure shuffledOptions exists
            if (!question.shuffledOptions) {
                // If shuffledOptions doesn't exist, use original options
                question.shuffledOptions = [...question.options];
                question.correctIndex = question.options.indexOf(question.answer);
            }
            
            for (let i = 0; i < 4; i++) {
                const btn = optionElements[i];
                if (question.shuffledOptions[i]) {
                    btn.textContent = question.shuffledOptions[i];
                    btn.style.display = 'flex';
                    
                    // Only show selected state if user answered
                    // During test, correct/incorrect classes are not added
                    if (userAnswers[currentQuestionIndex] === i) {
                        btn.className = 'option-btn selected';
                    } else {
                        btn.className = 'option-btn';
                    }
                } else {
                    // If option doesn't exist, hide button
                    btn.style.display = 'none';
                }
            }
            
            // Update progress
            updateProgress();
            updateQuestionNumberButtons();
            updateAnswerStatus();
            updateNavButtons();
        }

        // Select option function
        function selectOption(index) {
            if (currentQuestionIndex >= currentQuestions.length) return;
            
            // Save user answer
            userAnswers[currentQuestionIndex] = index;
            
            // Update display
            showQuestion();
            
            // Update answer status
            updateAnswerStatus();
        }

        // Update answer status function
        function updateAnswerStatus() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === null) {
                    unansweredCount++;
                } else {
                    const question = currentQuestions[i];
                    if (userAnswers[i] === question.correctIndex) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            }
            
            // Update display
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
            document.getElementById('unanswered-count').textContent = unansweredCount;
        }

        // Create question number buttons function
        function createQuestionNumberButtons() {
            const container = document.getElementById('question-numbers');
            container.innerHTML = '';
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = 'number-btn';
                button.onclick = () => {
                    currentQuestionIndex = i;
                    showQuestion();
                };
                container.appendChild(button);
            }
            
            updateQuestionNumberButtons();
        }

        // Update question number buttons function
        function updateQuestionNumberButtons() {
            const buttons = document.querySelectorAll('#question-numbers .number-btn');
            
            buttons.forEach((btn, index) => {
                // Remove previous classes
                btn.classList.remove('selected', 'answered', 'correct', 'incorrect');
                
                // If current question
                if (index === currentQuestionIndex) {
                    btn.classList.add('selected');
                }
                // If answered
                else if (userAnswers[index] !== null) {
                    // During test only show answered, not correct/wrong
                    btn.classList.add('answered');
                }
            });
        }

        // Update progress bar function
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // Update navigation buttons status function
        function updateNavButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            // Previous button
            if (currentQuestionIndex === 0) {
                prevBtn.disabled = true;
                prevBtn.style.opacity = '0.5';
                prevBtn.style.cursor = 'not-allowed';
            } else {
                prevBtn.disabled = false;
                prevBtn.style.opacity = '1';
                prevBtn.style.cursor = 'pointer';
            }
            
            // Next button
            if (currentQuestionIndex === currentQuestions.length - 1) {
                nextBtn.disabled = true;
                nextBtn.style.opacity = '0.5';
                nextBtn.style.cursor = 'not-allowed';
            } else {
                nextBtn.disabled = false;
                nextBtn.style.opacity = '1';
                nextBtn.style.cursor = 'pointer';
            }
        }

        // Next question function
        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        // Previous question function
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // Submit test function
        function submitQuiz() {
            // Stop timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Check unanswered questions
            const unanswered = [];
            for (let i = 0; i < userAnswers.length; i++) {
                if (userAnswers[i] === null) {
                    unanswered.push(i + 1);
                }
            }
            
            if (unanswered.length > 0) {
                const confirmSubmit = confirm(
                    `⚠️ You haven't answered ${unanswered.length} questions:\nQuestions: ${unanswered.join(', ')}\n\nAre you sure you want to finish the test?`
                );
                
                if (!confirmSubmit) {
                    // Restart timer
                    startTimer();
                    return;
                }
            }
            
            // Show results
            showResults();
        }

        // Show results function
        function showResults() {
            // Hide test page and show results
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'block';
            
            // Calculate results
            let correctCount = 0;
            const categoryStats = {};
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const question = currentQuestions[i];
                const userAnswer = userAnswers[i];
                
                // Count correct/wrong
                if (userAnswer === question.correctIndex) {
                    correctCount++;
                }
                
                // Category statistics
                if (!categoryStats[question.category]) {
                    categoryStats[question.category] = { total: 0, correct: 0 };
                }
                categoryStats[question.category].total++;
                if (userAnswer === question.correctIndex) {
                    categoryStats[question.category].correct++;
                }
            }
            
            const totalQuestions = currentQuestions.length;
            const percentage = Math.round((correctCount / totalQuestions) * 100);
            const isPassed = correctCount >= 6; // Passing condition: minimum 6 correct answers
            
            // Show summary results
            const summaryElement = document.getElementById('summary');
            let resultMessage = `🎯 Correct: ${correctCount} out of ${totalQuestions} | 📊 Percentage: ${percentage}%`;
            
            if (isPassed) {
                resultMessage += " ✅ You passed! 🎉";
                summaryElement.classList.add('pass-animation');
                
                // Create confetti
                createConfetti();
            } else {
                resultMessage += " ❌ You failed! 💪";
            }
            
            summaryElement.textContent = resultMessage;
            
            // Show detailed results
            displayCategoryResults(categoryStats);
            
            // Show first question with answer
            currentQuestionIndex = 0;
            createResultNumberButtons();
            showResultQuestion();
        }

        // Create confetti function
        function createConfetti() {
            const colors = ['#1a5f7a', '#159895', '#ffc107', '#2ecc71', '#e74c3c', '#3498db', '#2196F3', '#9C27B0'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animation = `confettiRain ${Math.random() * 3 + 2}s linear forwards`;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 20);
            }
        }

        // Display category results function
        function displayCategoryResults(categoryStats) {
            const container = document.getElementById('detailed-results');
            container.innerHTML = '<h3 style="color: var(--primary-color); margin-bottom: 20px; font-size: 22px;">📊 Detailed Results:</h3>';
            
            for (const [category, stats] of Object.entries(categoryStats)) {
                const percentage = Math.round((stats.correct / stats.total) * 100);
                const color = percentage >= 30 ? '#2ecc71' : '#e74c3c';
                
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-result';
                categoryElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong style="font-size: 18px;">${category}</strong>
                        <span style="font-weight: bold; color: ${color};">${percentage}%</span>
                    </div>
                    <div style="color: #666; margin-bottom: 10px;">${stats.correct} correct out of ${stats.total} questions</div>
                    <div style="height: 12px; background: #e9ecef; border-radius: 6px; overflow: hidden;">
                        <div style="height: 100%; width: ${percentage}%; background: ${color};"></div>
                    </div>
                `;
                
                container.appendChild(categoryElement);
            }
        }

        // Show question in results page function
        function showResultQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) return;
            
            const question = currentQuestions[currentQuestionIndex];
            document.getElementById('result-question').textContent = question.question;
            
            // Show options with coloring
            const optionElements = document.querySelectorAll('#result-options .option-btn');
            
            // Ensure shuffledOptions exists
            if (!question.shuffledOptions) {
                question.shuffledOptions = [...question.options];
                question.correctIndex = question.options.indexOf(question.answer);
            }
            
            for (let i = 0; i < 4; i++) {
                const btn = optionElements[i];
                if (question.shuffledOptions[i]) {
                    btn.textContent = question.shuffledOptions[i];
                    btn.style.display = 'flex';
                    
                    // Remove previous classes
                    btn.classList.remove('correct', 'incorrect', 'selected');
                    
                    // If option is correct
                    if (i === question.correctIndex) {
                        btn.classList.add('correct');
                    }
                    // If user selected this option and it's wrong
                    else if (userAnswers[currentQuestionIndex] === i && userAnswers[currentQuestionIndex] !== question.correctIndex) {
                        btn.classList.add('incorrect');
                    }
                    // If user gave correct answer (same color as correct)
                    else if (userAnswers[currentQuestionIndex] === i && userAnswers[currentQuestionIndex] === question.correctIndex) {
                        btn.classList.add('correct');
                    }
                } else {
                    btn.style.display = 'none';
                }
            }
            
            updateResultNumberButtons();
        }

        // Create number buttons in results page function
        function createResultNumberButtons() {
            const container = document.getElementById('result-numbers');
            container.innerHTML = '';
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = 'number-btn';
                button.onclick = () => {
                    currentQuestionIndex = i;
                    showResultQuestion();
                };
                container.appendChild(button);
            }
            
            updateResultNumberButtons();
        }

        // Update number buttons in results function
        function updateResultNumberButtons() {
            const buttons = document.querySelectorAll('#result-numbers .number-btn');
            
            buttons.forEach((btn, index) => {
                // Remove previous classes
                btn.classList.remove('selected', 'correct', 'incorrect');
                
                // If current question
                if (index === currentQuestionIndex) {
                    btn.classList.add('selected');
                }
                // If answered
                else if (userAnswers[index] !== null) {
                    const question = currentQuestions[index];
                    if (userAnswers[index] === question.correctIndex) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                    }
                }
            });
        }

        // Next question in results function
        function nextResultQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                showResultQuestion();
            }
        }

        // Previous question in results function
        function prevResultQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showResultQuestion();
            }
        }

        // Show help function
        function showHelp() {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('help-container').style.display = 'block';
        }

        // Back to menu function
        function backToMainMenu() {
            // Stop timer if active
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Reset variables
            currentQuestions = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            
            // Show menu
            document.getElementById('main-menu').style.display = 'flex';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('help-container').style.display = 'none';
            
            // Back to exam selection
            backToExamSelection();
        }

        // Start same test again function
        function startSameExamAgain() {
            backToMainMenu();
            setTimeout(() => {
                if (currentExamType) {
                    startRandomExam(currentExamType);
                }
            }, 100);
        }

        // Keyboard events management
        document.addEventListener('keydown', function(event) {
            // Navigate between questions with arrow keys
            if (document.getElementById('quiz-container').style.display !== 'none') {
                if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                    event.preventDefault();
                    nextQuestion();
                } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                    event.preventDefault();
                    prevQuestion();
                }
                
                // Select options with numbers 1-4
                if (event.key >= '1' && event.key <= '4') {
                    const index = parseInt(event.key) - 1;
                    selectOption(index);
                }
            }
            
            // In results page
            if (document.getElementById('results-container').style.display !== 'none') {
                if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                    event.preventDefault();
                    nextResultQuestion();
                } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                    event.preventDefault();
                    prevResultQuestion();
                }
            }
            
            // Enter key in login
            if (document.getElementById('login-container').style.display !== 'none' && event.key === 'Enter') {
                event.preventDefault();
                checkPassword();
            }
            
            // Ctrl+Enter to finish test
            if (event.ctrlKey && event.key === 'Enter' && document.getElementById('quiz-container').style.display !== 'none') {
                event.preventDefault();
                submitQuiz();
            }
            
            // Escape to return
            if (event.key === 'Escape') {
                if (document.getElementById('quiz-container').style.display !== 'none') {
                    if (confirm('Do you want to leave the test?')) {
                        backToMainMenu();
                    }
                } else if (document.getElementById('help-container').style.display !== 'none') {
                    backToMainMenu();
                }
            }
        });

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Load password
            loadPassword();
            
            // Add event listener for Enter key on login button
            document.getElementById('password-input').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    checkPassword();
                }
            });
            
            // Set focus on password field
            document.getElementById('password-input').focus();
            
            // Show welcome message
            setTimeout(() => {
                if (document.getElementById('login-container').style.display !== 'none') {
                    const messageElement = document.getElementById('login-message');
                    if (messageElement.textContent === '') {
                        messageElement.textContent = '👋 Welcome! Default password: 1452';
                        messageElement.style.color = 'var(--info-color)';
                    }
                }
            }, 2000);
        });
    </script>
</body>
</html>
